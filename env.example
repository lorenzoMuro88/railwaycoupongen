# Server Configuration
PORT=3000

# Database Configuration
# SQLite database will be created automatically in data/coupons.db

# Authentication (Session-based login system)
# Default users are created automatically on first run:
# - SuperAdmin: username=admin, password=admin123 (1 only, manages entire system)
# - Store: username=store, password=store123
# You can change these defaults by setting the environment variables below:

SUPERADMIN_PASSWORD=admin123
STORE_PASSWORD=store123

# Session Configuration
SESSION_SECRET=your-secret-key-change-in-production
DEFAULT_TENANT_SLUG=default
DEFAULT_TENANT_NAME=Default Tenant
ENFORCE_TENANT_PREFIX=false
LOGIN_WINDOW_MS=600000
LOGIN_MAX_ATTEMPTS=10
LOGIN_LOCK_MS=1800000
UPLOAD_MAX_BYTES=2097152

# Public form submit rate limits
SUBMIT_WINDOW_MS=600000
SUBMIT_MAX_PER_IP=20
SUBMIT_LOCK_MS=1800000

# Per-email daily limits
EMAIL_DAILY_WINDOW_MS=86400000
EMAIL_MAX_PER_DAY=3
EMAIL_LOCK_MS=86400000

# reCAPTCHA (Invisible v2/v3)
RECAPTCHA_ENABLED=false
RECAPTCHA_SITE_KEY=
RECAPTCHA_SECRET=

# Redis (production sessions)
REDIS_URL=redis://redis:6379

# Note: The legacy Basic Auth variables below are no longer used
# but kept for backward compatibility. The new system uses the
# session-based authentication with the users created in the database.

# Email Configuration
# Choose one of the following email providers:

# Option 1: Mailgun (Recommended)
MAIL_PROVIDER=mailgun
MAILGUN_API_KEY=your_mailgun_api_key_here
MAILGUN_DOMAIN=your_domain.mailgun.org
MAILGUN_FROM=CouponGen <no-reply@send.coupongen.it>
MAILGUN_REGION=eu
MAILGUN_TRACKING=false
MAILGUN_REPLY_TO=support@send.coupongen.it

# Option 2: SMTP (Alternative)
# MAIL_PROVIDER=smtp
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=your_email@gmail.com
# SMTP_PASS=your_app_password

# Option 3: Development (No real email sending)
# Leave all email settings empty to log emails to console

# Email Template
MAIL_SUBJECT=Il tuo coupon
MAIL_FROM=CouponGen <no-reply@send.coupongen.it>
MAIL_TEST_TO=test@example.com

# Note: Each tenant can now customize their email sender name via the admin interface.
# The domain will always remain send.coupongen.it for deliverability.
# Default sender name for new tenants: "CouponGen"

# Default Discount (if no campaign is specified)
DEFAULT_DISCOUNT_PERCENT=10

# Server Timeout Configuration (optional - defaults are reasonable)
# SERVER_KEEPALIVE_TIMEOUT=65000
# SERVER_HEADERS_TIMEOUT=66000
# SERVER_REQUEST_TIMEOUT=30000
# SERVER_OVERALL_TIMEOUT=30000

# Database Timeout Configuration (optional)
# DB_BUSY_TIMEOUT=30000

# Email Timeout Configuration (optional)
# EMAIL_CONNECTION_TIMEOUT=30000
# EMAIL_SOCKET_TIMEOUT=30000

# Security Notes:
# - Change SUPERADMIN_PASSWORD and STORE_PASSWORD in production
# - Use strong passwords for authentication
# - Configure proper email settings for production
# - Consider using HTTPS in production
# - Change SESSION_SECRET to a secure random string in production
# - Only 1 SuperAdmin user should exist in the system
